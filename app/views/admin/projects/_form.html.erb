<section class="bg-white p-4 border rounded">
  <%= form_with model: [:admin, project], class: "flex flex-col gap-4", data: { controller: "project-form "} do |form| %>
    <div class="flex items-center gap-10">
      <%=
        form.collection_select :project_category_id,
        project_categories,
        :id,
        :name,
        { include_blank: t("choose_category") },
        { class: "px-4 py-3 bg-white border rounded border-slate-800" }
      %>
      <div class="flex gap-4">
        <div>
          <%= form.label :visible_true, class: "flex flex-col items-center text-gray-400 px-4 py-1 border cursor-pointer rounded has-[:checked]:bg-slate-100 has-[:checked]:text-slate-800" do %>
            <%= form.radio_button :visible, true, class: "hidden" %>
            <%= t("visible") %>
            <%= inline_svg_tag("icons/eye.svg", class: "w-4") %>
          <% end %>
        </div>
        <div>
          <%= form.label :visible_false, class: "flex flex-col items-center text-gray-400 px-4 py-1 border cursor-pointer rounded has-[:checked]:bg-slate-100 has-[:checked]:text-slate-800" do %>
            <%= form.radio_button :visible, false, class: "hidden" %>
            <%= t("hidden") %>
            <%= inline_svg_tag("icons/eye-slash.svg", class: "w-4") %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="flex flex-col gap-4">
      <div
        class="border rounded p-3 relative group"
        data-project-form-target="coverPhotoContainer"
        data-has-cover-photo="<%= project.cover_photo.attached? %>"
      >
        <%=
          form.file_field :cover_photo,
          class: "hidden",
          data: {
            id: "cover-photo",
            "project-form-target": "imageInput",
            action: "change->project-form#imageUploaded"
          }
        %>
        <%= form.hidden_field :remove_cover_photo, disabled: true, data: { "project-form-target": "removeCoverPhotoInput" } %>
        <%=
          image_tag project.cover_photo.presence || "",
          class: "w-full h-60 object-cover mb-3 group-[[data-has-cover-photo='false']]:hidden",
          data: {
            "project-form-target": "imagePreview",
            id: "cover-photo"
          }
        %>
        <div class="flex gap-3 justify-end right-5">
          <%=
            form.label :cover_photo,
            class: "px-3 py-1 rounded border border-slate-800 text-slate-800 text-sm cursor-pointer transition-colors hover:bg-slate-200" do
          %>
            <span class="group-[[data-has-cover-photo='false']]:hidden"><%= t("change") %></span>
            <span class="group-[[data-has-cover-photo='true']]:hidden"><%= t("add_cover_photo") %></span>
          <% end %>
          <%=
            button_tag t("remove"),
            class: "px-3 py-1 rounded border border-red-500 text-red-500 text-sm cursor-pointer transition-colors hover:bg-red-100 group-[[data-has-cover-photo='false']]:hidden",
            type: :button,
            data: {
              id: "cover-photo",
              action: "click->project-form#removeImage"
            }
          %>
        </div>
      </div>
      <%=
        form.text_field :name,
        placeholder: :name,
        class: "w-full border rounded p-3 font-bold text-xl"
      %>
      <%=
        form.textarea :description,
        placeholder: :description,
        class: "w-full border rounded p-3"
      %>
    </div>

    <%= form.submit class: "admin-btn-primary cursor-pointer" %>
  <% end %>
</section>